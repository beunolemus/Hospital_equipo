{"ast":null,"code":"import \"core-js/modules/es.array.fill.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.string.link.js\";\n/**\r\n * FlowDiagramLink module\r\n */\nimport { __extends } from \"tslib\";\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\nimport { Sprite } from \"../../core/Sprite\";\nimport { Container } from \"../../core/Container\";\nimport { LinearGradient } from \"../../core/rendering/fills/LinearGradient\";\nimport { registry } from \"../../core/Registry\";\nimport { Bullet } from \"../elements/Bullet\";\nimport { Color } from \"../../core/utils/Color\";\nimport { ListTemplate, ListDisposer } from \"../../core/utils/List\";\nimport { Polyline } from \"../../core/elements/Polyline\";\nimport { Line } from \"../../core/elements/Line\";\nimport { InterfaceColorSet } from \"../../core/utils/InterfaceColorSet\";\nimport * as $iter from \"../../core/utils/Iterator\";\nimport * as $type from \"../../core/utils/Type\";\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\n/**\r\n * This class creates a link (waved color-filled line) between two nodes in a\r\n * Flow Diagram.\r\n *\r\n * @see {@link IFlowDiagramLinkEvents} for a list of available events\r\n * @see {@link IFlowDiagramLinkAdapters} for a list of available Adapters\r\n * @important\r\n */\nvar FlowDiagramLink = /** @class */function (_super) {\n  __extends(FlowDiagramLink, _super);\n  /**\r\n   * Constructor\r\n   */\n  function FlowDiagramLink() {\n    var _this = _super.call(this) || this;\n    _this.className = \"FlowDiagramLink\";\n    var interfaceColors = new InterfaceColorSet();\n    _this.maskBullets = false;\n    _this.colorMode = \"fromNode\";\n    _this.layout = \"none\";\n    _this.isMeasured = false;\n    _this.startAngle = 0;\n    _this.endAngle = 0;\n    _this.strokeOpacity = 0;\n    // this is very important, otherwise the container will be shifted\n    _this.verticalCenter = \"none\";\n    _this.horizontalCenter = \"none\";\n    _this.tooltipText = \"{fromName}→{toName}:{value.value}\";\n    _this.tooltipLocation = 0.5;\n    _this.link = _this.createChild(Sprite);\n    _this.link.shouldClone = false;\n    _this.link.setElement(_this.paper.add(\"path\"));\n    _this.link.isMeasured = false;\n    _this.fillOpacity = 0.2;\n    _this.fill = interfaceColors.getFor(\"alternativeBackground\");\n    _this.applyTheme();\n    return _this;\n  }\n  /**\r\n   * Positions bullets\r\n   * @ignore\r\n   */\n  FlowDiagramLink.prototype.positionBullets = function () {\n    var _this = this;\n    $iter.each(this.bullets.iterator(), function (bullet) {\n      bullet.parent = _this.bulletsContainer;\n      bullet.maxWidth = _this.maxWidth;\n      bullet.maxHeight = _this.maxHeight;\n      _this.positionBullet(bullet);\n    });\n  };\n  Object.defineProperty(FlowDiagramLink.prototype, \"bulletsContainer\", {\n    /**\r\n     * Bullets container\r\n     */\n    get: function get() {\n      if (!this._bulletsContainer) {\n        var bulletsContainer = this.createChild(Container);\n        bulletsContainer.shouldClone = false;\n        bulletsContainer.layout = \"none\";\n        this._bulletsContainer = bulletsContainer;\n      }\n      return this._bulletsContainer;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(FlowDiagramLink.prototype, \"bulletsMask\", {\n    /**\r\n     * Bullets mask sprite\r\n     */\n    get: function get() {\n      if (!this._bulletsMask) {\n        var bulletsMask = this.createChild(Sprite);\n        bulletsMask.shouldClone = false;\n        bulletsMask.setElement(this.paper.add(\"path\"));\n        bulletsMask.isMeasured = false;\n        this._bulletsMask = bulletsMask;\n      }\n      return this._bulletsMask;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  /**\r\n   * Positions bullets at relative bullet.locationX position on the link.\r\n   * @ignore\r\n   */\n  FlowDiagramLink.prototype.positionBullet = function (bullet) {\n    var location = bullet.locationX;\n    if (!$type.isNumber(location)) {\n      location = bullet.locationY;\n    }\n    if (!$type.isNumber(location)) {\n      location = 0.5;\n    }\n    var point = this.middleLine.positionToPoint(location);\n    bullet.moveTo(point);\n    var rotationField = bullet.propertyFields.rotation;\n    var angle;\n    if (bullet.dataItem) {\n      var dataContext = bullet.dataItem.dataContext;\n      angle = dataContext[rotationField];\n    }\n    if (!$type.isNumber(angle)) {\n      angle = point.angle;\n    }\n    bullet.rotation = angle;\n  };\n  Object.defineProperty(FlowDiagramLink.prototype, \"startAngle\", {\n    /**\r\n     * @return Start angle\r\n     */\n    get: function get() {\n      return this.getPropertyValue(\"startAngle\");\n    },\n    /**\r\n     * [startAngle description]\r\n     *\r\n     * @todo Description\r\n     * @param value  Start angle\r\n     */\n    set: function set(value) {\n      this.setPropertyValue(\"startAngle\", value, true);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(FlowDiagramLink.prototype, \"endAngle\", {\n    /**\r\n     * @return End angle\r\n     */\n    get: function get() {\n      return this.getPropertyValue(\"endAngle\");\n    },\n    /**\r\n     * [endAngle description]\r\n     *\r\n     * @todo Description\r\n     * @param value  End angle\r\n     */\n    set: function set(value) {\n      this.setPropertyValue(\"endAngle\", value, true);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(FlowDiagramLink.prototype, \"colorMode\", {\n    /**\r\n     * Fill mode\r\n     */\n    get: function get() {\n      return this.getPropertyValue(\"colorMode\");\n    },\n    /**\r\n     * Should link be filled with a solid color, color of from node, color of toNode or gradient between node colors.\r\n     * Some of the links, like ChordLink does not support gradiens well.\r\n     *\r\n     * @param value  Fill mode\r\n     */\n    set: function set(value) {\n      if (value == \"gradient\") {\n        var color = this.fill;\n        this.gradient.stops.clear();\n        if (color instanceof Color) {\n          this.gradient.addColor(color);\n          this.gradient.addColor(color);\n        }\n        this.fill = this.gradient;\n        this.stroke = this.gradient;\n      }\n      this.setPropertyValue(\"colorMode\", value, true);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(FlowDiagramLink.prototype, \"maskBullets\", {\n    /**\r\n     * @return mask bullets value\r\n     */\n    get: function get() {\n      return this.getPropertyValue(\"maskBullets\");\n    },\n    /**\r\n     * Should link bullets be masked or not\r\n     *\r\n     * @param value\r\n     * @default false\r\n     */\n    set: function set(value) {\n      this.setPropertyValue(\"maskBullets\", value, true);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(FlowDiagramLink.prototype, \"tooltipLocation\", {\n    /**\r\n     * Tooltip location value\r\n     */\n    get: function get() {\n      return this.getPropertyValue(\"tooltipLocation\");\n    },\n    /**\r\n     * Relative location of a tooltip.\r\n     * @default 0.5\r\n     *\r\n     * @param value\r\n     */\n    set: function set(value) {\n      this.setPropertyValue(\"tooltipLocation\", value, true);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  /**\r\n   * Adds color steps in the link gradient.\r\n   *\r\n   * @param value  Fill option\r\n   */\n  FlowDiagramLink.prototype.setFill = function (value) {\n    _super.prototype.setFill.call(this, value);\n    var gradient = this._gradient;\n    if (gradient && value instanceof Color) {\n      gradient.stops.clear();\n      gradient.addColor(value);\n      gradient.addColor(value);\n    }\n  };\n  /**\r\n   * Updates bounding box based on element dimension settings.\r\n   *\r\n   * @ignore Exclude from docs\r\n   */\n  FlowDiagramLink.prototype.measureElement = function () {};\n  Object.defineProperty(FlowDiagramLink.prototype, \"bullets\", {\n    /**\r\n     * List of bullets\r\n     *\r\n     * @return [description]\r\n     */\n    get: function get() {\n      var _this = this;\n      if (!this._bullets) {\n        this._bullets = new ListTemplate(new Bullet());\n        this._disposers.push(new ListDisposer(this._bullets));\n        this._disposers.push(this._bullets.template);\n        this._bullets.events.on(\"inserted\", function (event) {\n          event.newValue.events.on(\"propertychanged\", function (event) {\n            if (event.property == \"locationX\" || event.property == \"locationY\") {\n              _this.positionBullet(event.target);\n            }\n          }, undefined, false);\n        }, undefined, false);\n      }\n      return this._bullets;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  /**\r\n   * Copies properties from another [[FlowDiagramLink]].\r\n   *\r\n   * @param source  Source link\r\n   */\n  FlowDiagramLink.prototype.copyFrom = function (source) {\n    _super.prototype.copyFrom.call(this, source);\n    this.bullets.copyFrom(source.bullets);\n    var middleLine = this.middleLine;\n    if (middleLine) {\n      if (middleLine instanceof Line && source.middleLine instanceof Line) {\n        middleLine.copyFrom(source.middleLine);\n      }\n      if (middleLine instanceof Polyline && source.middleLine instanceof Polyline) {\n        middleLine.copyFrom(source.middleLine);\n      }\n    }\n    this.link.copyFrom(source.link);\n  };\n  /**\r\n   * @ignore Exclude from docs\r\n   * @return Tooltip X (px)\r\n   */\n  FlowDiagramLink.prototype.getTooltipX = function () {\n    if (this.middleLine) {\n      return this.middleLine.positionToPoint(this.tooltipLocation).x;\n    }\n  };\n  /**\r\n   * @ignore Exclude from docs\r\n   * @return Tooltip Y (px)\r\n   */\n  FlowDiagramLink.prototype.getTooltipY = function () {\n    if (this.middleLine) {\n      return this.middleLine.positionToPoint(this.tooltipLocation).y;\n    }\n  };\n  Object.defineProperty(FlowDiagramLink.prototype, \"gradient\", {\n    /**\r\n     * A gradiend instance that is used to provided colored gradient fills for\r\n     * the Flow link.\r\n     */\n    get: function get() {\n      if (!this._gradient) {\n        this._gradient = new LinearGradient();\n      }\n      return this._gradient;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return FlowDiagramLink;\n}(Container);\nexport { FlowDiagramLink };\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\nregistry.registeredClasses[\"FlowDiagramLink\"] = FlowDiagramLink;","map":{"version":3,"names":["Sprite","Container","LinearGradient","registry","Bullet","Color","ListTemplate","ListDisposer","Polyline","Line","InterfaceColorSet","$iter","$type","FlowDiagramLink","_super","__extends","_this","call","className","interfaceColors","maskBullets","colorMode","layout","isMeasured","startAngle","endAngle","strokeOpacity","verticalCenter","horizontalCenter","tooltipText","tooltipLocation","link","createChild","shouldClone","setElement","paper","add","fillOpacity","fill","getFor","applyTheme","prototype","positionBullets","each","bullets","iterator","bullet","parent","bulletsContainer","maxWidth","maxHeight","positionBullet","Object","defineProperty","get","_bulletsContainer","_bulletsMask","bulletsMask","location","locationX","isNumber","locationY","point","middleLine","positionToPoint","moveTo","rotationField","propertyFields","rotation","angle","dataItem","dataContext","getPropertyValue","set","value","setPropertyValue","color","gradient","stops","clear","addColor","stroke","setFill","_gradient","measureElement","_bullets","_disposers","push","template","events","on","event","newValue","property","target","undefined","copyFrom","source","getTooltipX","x","getTooltipY","y","registeredClasses"],"sources":["../../../../../src/.internal/charts/elements/FlowDiagramLink.ts"],"sourcesContent":["/**\r\n * FlowDiagramLink module\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Sprite } from \"../../core/Sprite\";\r\nimport { Container, IContainerProperties, IContainerEvents, IContainerAdapters } from \"../../core/Container\";\r\nimport { FlowDiagramDataItem } from \"../types/FlowDiagram\";\r\nimport { LinearGradient } from \"../../core/rendering/fills/LinearGradient\";\r\nimport { RadialGradient } from \"../../core/rendering/fills/RadialGradient\";\r\nimport { Pattern } from \"../../core/rendering/fills/Pattern\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { Bullet } from \"../elements/Bullet\";\r\nimport { Color } from \"../../core/utils/Color\";\r\nimport { ListTemplate, ListDisposer } from \"../../core/utils/List\";\r\nimport { Polyline } from \"../../core/elements/Polyline\";\r\nimport { Line } from \"../../core/elements/Line\";\r\nimport { InterfaceColorSet } from \"../../core/utils/InterfaceColorSet\";\r\nimport * as $iter from \"../../core/utils/Iterator\";\r\nimport * as $type from \"../../core/utils/Type\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines properties for [[FlowDiagramLink]].\r\n */\r\nexport interface IFlowDiagramLinkProperties extends IContainerProperties {\r\n\r\n\t/**\r\n\t * [tension description]\r\n\t *\r\n\t * @todo Description\r\n\t */\r\n\ttension?: number;\r\n\r\n\t/**\r\n\t * [startX description]\r\n\t *\r\n\t * @todo Description\r\n\t */\r\n\tstartX?: number;\r\n\r\n\t/**\r\n\t * [startY description]\r\n\t *\r\n\t * @todo Description\r\n\t */\r\n\tstartY?: number;\r\n\r\n\t/**\r\n\t * [endX description]\r\n\t *\r\n\t * @todo Description\r\n\t */\r\n\tendX?: number;\r\n\r\n\t/**\r\n\t * [endY description]\r\n\t *\r\n\t * @todo Description\r\n\t */\r\n\tendY?: number;\r\n\r\n\t/**\r\n\t * [linkWidth description]\r\n\t *\r\n\t * @todo Description\r\n\t */\r\n\tlinkWidth?: number;\r\n\r\n\t/**\r\n\t * [startAngle description]\r\n\t *\r\n\t * @todo Description\r\n\t */\r\n\tstartAngle?: number;\r\n\r\n\t/**\r\n\t * [endAngle description]\r\n\t *\r\n\t * @todo Description\r\n\t */\r\n\tendAngle?: number;\r\n\r\n\t/**\r\n\t * Should link be filled with a solid color, color of from node, color of toNode or gradient between node colors.\r\n\t */\r\n\tcolorMode?: \"solid\" | \"gradient\" | \"fromNode\" | \"toNode\";\r\n\r\n\t/**\r\n\t * [controlPointDistance description]\r\n\t *\r\n\t * @todo Description\r\n\t */\r\n\tcontrolPointDistance?: number;\r\n\r\n\t/**\r\n\t * [maskBullets description]\r\n\t *\r\n\t * @todo Description\r\n\t */\r\n\tmaskBullets?: boolean;\r\n\r\n\t/**\r\n\t * [tooltipLocation description]\r\n\t *\r\n\t * @todo Description\r\n\t */\r\n\ttooltipLocation?: number;\r\n}\r\n\r\n/**\r\n * Defines events for [[FlowDiagramLink]].\r\n */\r\nexport interface IFlowDiagramLinkEvents extends IContainerEvents { }\r\n\r\n/**\r\n * Defines adapters for [[FlowDiagramLink]].\r\n *\r\n * @see {@link Adapter}\r\n */\r\nexport interface IFlowDiagramLinkAdapters extends IContainerAdapters, IFlowDiagramLinkProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * This class creates a link (waved color-filled line) between two nodes in a\r\n * Flow Diagram.\r\n *\r\n * @see {@link IFlowDiagramLinkEvents} for a list of available events\r\n * @see {@link IFlowDiagramLinkAdapters} for a list of available Adapters\r\n * @important\r\n */\r\nexport class FlowDiagramLink extends Container {\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t */\r\n\tpublic _properties!: IFlowDiagramLinkProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t */\r\n\tpublic _adapter!: IFlowDiagramLinkAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t */\r\n\tpublic _events!: IFlowDiagramLinkEvents;\r\n\r\n\t/**\r\n\t * Defines a type of data item used by this class.\r\n\t */\r\n\tpublic _dataItem: FlowDiagramDataItem;\r\n\r\n\t/**\r\n\t * A gradiend instance that is used to provided colored gradient fills for\r\n\t * the Flow link.\r\n\t */\r\n\tprotected _gradient: LinearGradient;\r\n\r\n\r\n\t/**\r\n\t * List of bullets\r\n\t * @ignore\r\n\t */\r\n\tprotected _bullets: ListTemplate<Bullet>;\r\n\r\n\t/**\r\n\t * Link sprite\r\n\t */\r\n\tpublic link: Sprite;\r\n\r\n\t/**\r\n\t * Bullets mask spite\r\n     */\r\n\tprotected _bulletsMask: Sprite;\r\n\r\n\t/**\r\n\t * Bullets container\r\n     */\r\n\tprotected _bulletsContainer: Container;\r\n\r\n\t/**\r\n\t * Spline which goes through the middle of a link, used to calculate bullet and tooltip positions, invisible by default\r\n     */\r\n\tpublic middleLine: Line | Polyline;\r\n\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"FlowDiagramLink\";\r\n\r\n\t\tlet interfaceColors = new InterfaceColorSet();\r\n\r\n\t\tthis.maskBullets = false;\r\n\r\n\t\tthis.colorMode = \"fromNode\";\r\n\r\n\t\tthis.layout = \"none\";\r\n\t\tthis.isMeasured = false;\r\n\r\n\t\tthis.startAngle = 0;\r\n\t\tthis.endAngle = 0;\r\n\r\n\t\tthis.strokeOpacity = 0;\r\n\r\n\t\t// this is very important, otherwise the container will be shifted\r\n\t\tthis.verticalCenter = \"none\";\r\n\t\tthis.horizontalCenter = \"none\";\r\n\r\n\t\tthis.tooltipText = \"{fromName}→{toName}:{value.value}\";\r\n\t\tthis.tooltipLocation = 0.5;\r\n\r\n\t\tthis.link = this.createChild(Sprite);\r\n\t\tthis.link.shouldClone = false;\r\n\t\tthis.link.setElement(this.paper.add(\"path\"));\r\n\t\tthis.link.isMeasured = false;\r\n\t\tthis.fillOpacity = 0.2;\r\n\t\tthis.fill = interfaceColors.getFor(\"alternativeBackground\");\r\n\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * Positions bullets\r\n\t * @ignore\r\n\t */\r\n\tprotected positionBullets() {\r\n\t\t$iter.each(this.bullets.iterator(), (bullet) => {\r\n\t\t\tbullet.parent = this.bulletsContainer;\r\n\r\n\t\t\tbullet.maxWidth = this.maxWidth;\r\n\t\t\tbullet.maxHeight = this.maxHeight;\r\n\r\n\t\t\tthis.positionBullet(bullet);\r\n\t\t})\r\n\t}\r\n\r\n\t/**\r\n\t * Bullets container\r\n     */\r\n\tpublic get bulletsContainer() {\r\n\t\tif (!this._bulletsContainer) {\r\n\t\t\tlet bulletsContainer = this.createChild(Container);\r\n\t\t\tbulletsContainer.shouldClone = false;\r\n\t\t\tbulletsContainer.layout = \"none\";\r\n\t\t\tthis._bulletsContainer = bulletsContainer;\r\n\t\t}\r\n\t\treturn this._bulletsContainer;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Bullets mask sprite\r\n     */\r\n\tpublic get bulletsMask() {\r\n\t\tif (!this._bulletsMask) {\r\n\t\t\tlet bulletsMask = this.createChild(Sprite);\r\n\t\t\tbulletsMask.shouldClone = false;\r\n\t\t\tbulletsMask.setElement(this.paper.add(\"path\"));\r\n\t\t\tbulletsMask.isMeasured = false;\r\n\t\t\tthis._bulletsMask = bulletsMask;\r\n\t\t}\r\n\t\treturn this._bulletsMask;\r\n\t}\r\n\r\n\t/**\r\n\t * Positions bullets at relative bullet.locationX position on the link.\r\n\t * @ignore\r\n\t */\r\n\tprotected positionBullet(bullet: Bullet) {\r\n\r\n\t\tlet location = bullet.locationX;\r\n\r\n\t\tif (!$type.isNumber(location)) {\r\n\t\t\tlocation = bullet.locationY;\r\n\t\t}\r\n\r\n\t\tif (!$type.isNumber(location)) {\r\n\t\t\tlocation = 0.5;\r\n\t\t}\r\n\t\tlet point = this.middleLine.positionToPoint(location);\r\n\r\n\t\tbullet.moveTo(point);\r\n\r\n\t\tlet rotationField = bullet.propertyFields.rotation;\r\n\t\tlet angle: number;\r\n\t\tif (bullet.dataItem) {\r\n\t\t\tlet dataContext: any = bullet.dataItem.dataContext;\r\n\t\t\tangle = dataContext[rotationField];\r\n\t\t}\r\n\t\tif (!$type.isNumber(angle)) {\r\n\t\t\tangle = point.angle;\r\n\t\t}\r\n\r\n\t\tbullet.rotation = angle;\r\n\t}\r\n\r\n\t/**\r\n\t * [startAngle description]\r\n\t *\r\n\t * @todo Description\r\n\t * @param value  Start angle\r\n\t */\r\n\tpublic set startAngle(value: number) {\r\n\t\tthis.setPropertyValue(\"startAngle\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return Start angle\r\n\t */\r\n\tpublic get startAngle(): number {\r\n\t\treturn this.getPropertyValue(\"startAngle\");\r\n\t}\r\n\r\n\t/**\r\n\t * [endAngle description]\r\n\t *\r\n\t * @todo Description\r\n\t * @param value  End angle\r\n\t */\r\n\tpublic set endAngle(value: number) {\r\n\t\tthis.setPropertyValue(\"endAngle\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return End angle\r\n\t */\r\n\tpublic get endAngle(): number {\r\n\t\treturn this.getPropertyValue(\"endAngle\");\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Should link be filled with a solid color, color of from node, color of toNode or gradient between node colors.\r\n\t * Some of the links, like ChordLink does not support gradiens well.\r\n\t *\r\n\t * @param value  Fill mode\r\n\t */\r\n\tpublic set colorMode(value: \"solid\" | \"gradient\" | \"fromNode\" | \"toNode\") {\r\n\t\tif (value == \"gradient\") {\r\n\t\t\tlet color = this.fill;\r\n\r\n\t\t\tthis.gradient.stops.clear();\r\n\t\t\tif (color instanceof Color) {\r\n\t\t\t\tthis.gradient.addColor(color);\r\n\t\t\t\tthis.gradient.addColor(color);\r\n\t\t\t}\r\n\t\t\tthis.fill = this.gradient;\r\n\t\t\tthis.stroke = this.gradient;\r\n\t\t}\r\n\t\tthis.setPropertyValue(\"colorMode\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * Fill mode\r\n\t */\r\n\tpublic get colorMode(): \"solid\" | \"gradient\" | \"fromNode\" | \"toNode\" {\r\n\t\treturn this.getPropertyValue(\"colorMode\");\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Should link bullets be masked or not\r\n\t *\r\n\t * @param value\r\n\t * @default false\r\n\t */\r\n\tpublic set maskBullets(value: boolean) {\r\n\t\tthis.setPropertyValue(\"maskBullets\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return mask bullets value\r\n\t */\r\n\tpublic get maskBullets(): boolean {\r\n\t\treturn this.getPropertyValue(\"maskBullets\");\r\n\t}\r\n\r\n\t/**\r\n\t * Relative location of a tooltip.\r\n\t * @default 0.5\r\n\t *\r\n\t * @param value\r\n\t */\r\n\tpublic set tooltipLocation(value: number) {\r\n\t\tthis.setPropertyValue(\"tooltipLocation\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * Tooltip location value\r\n\t */\r\n\tpublic get tooltipLocation(): number {\r\n\t\treturn this.getPropertyValue(\"tooltipLocation\");\r\n\t}\r\n\r\n\t/**\r\n\t * Adds color steps in the link gradient.\r\n\t *\r\n\t * @param value  Fill option\r\n\t */\r\n\tprotected setFill(value: Color | Pattern | LinearGradient | RadialGradient) {\r\n\t\tsuper.setFill(value)\r\n\t\tlet gradient = this._gradient;\r\n\r\n\t\tif (gradient && value instanceof Color) {\r\n\t\t\tgradient.stops.clear();\r\n\t\t\tgradient.addColor(value);\r\n\t\t\tgradient.addColor(value);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Updates bounding box based on element dimension settings.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic measureElement(): void {\r\n\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * List of bullets\r\n\t *\r\n\t * @return [description]\r\n\t */\r\n\tpublic get bullets(): ListTemplate<Bullet> {\r\n\t\tif (!this._bullets) {\r\n\t\t\tthis._bullets = new ListTemplate<Bullet>(new Bullet());\r\n\t\t\tthis._disposers.push(new ListDisposer(this._bullets));\r\n\t\t\tthis._disposers.push(this._bullets.template);\r\n\t\t\tthis._bullets.events.on(\"inserted\", (event) => {\r\n\t\t\t\tevent.newValue.events.on(\"propertychanged\", (event) => {\r\n\t\t\t\t\tif (event.property == \"locationX\" || event.property == \"locationY\") {\r\n\t\t\t\t\t\tthis.positionBullet(event.target);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, undefined, false)\r\n\t\t\t}, undefined, false)\r\n\t\t}\r\n\t\treturn this._bullets;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Copies properties from another [[FlowDiagramLink]].\r\n\t *\r\n\t * @param source  Source link\r\n\t */\r\n\tcopyFrom(source: this) {\r\n\t\tsuper.copyFrom(source);\r\n\t\tthis.bullets.copyFrom(source.bullets);\r\n\t\tlet middleLine = this.middleLine;\r\n\t\tif (middleLine) {\r\n\t\t\tif (middleLine instanceof Line && source.middleLine instanceof Line) {\r\n\t\t\t\tmiddleLine.copyFrom(source.middleLine);\r\n\t\t\t}\r\n\r\n\t\t\tif (middleLine instanceof Polyline && source.middleLine instanceof Polyline) {\r\n\t\t\t\tmiddleLine.copyFrom(source.middleLine);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.link.copyFrom(source.link);\r\n\t}\r\n\r\n\t/**\r\n\t * @ignore Exclude from docs\r\n\t * @return Tooltip X (px)\r\n\t */\r\n\tpublic getTooltipX(): number {\r\n\t\tif (this.middleLine) {\r\n\t\t\treturn this.middleLine.positionToPoint(this.tooltipLocation).x;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @ignore Exclude from docs\r\n\t * @return Tooltip Y (px)\r\n\t */\r\n\tpublic getTooltipY(): number {\r\n\t\tif (this.middleLine) {\r\n\t\t\treturn this.middleLine.positionToPoint(this.tooltipLocation).y;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * A gradiend instance that is used to provided colored gradient fills for\r\n\t * the Flow link.\r\n\t */\r\n\tpublic get gradient() {\r\n\t\tif (!this._gradient) {\r\n\t\t\tthis._gradient = new LinearGradient();\r\n\t\t}\r\n\t\treturn this._gradient;\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"FlowDiagramLink\"] = FlowDiagramLink;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}